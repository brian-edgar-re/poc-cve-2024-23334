# Use the official Ubuntu 22.04 LTS image as the base
FROM ubuntu:22.04

# Optional: Set a label to describe the Docker image
LABEL description="Basic Docker image with Ubuntu 22.04 LTS and some utilities"

# Run package updates and install some common utilities
RUN apt-get update && apt-get install -y python3 python3-pip

# Create directory
RUN mkdir -p /workspace

# Set the working directory
WORKDIR /workspace

# Add application source code into dockerfile
ADD app app
ADD requirements.txt requirements.txt

# Install requirements
RUN pip3 install -r requirements.txt

# Add static resources
ADD static static

# Create link between a file inside static file and /etc/shadow
# THIS IS THE VULNERABLE LINK
RUN ln -s /etc/shadow static/image.png

# Specifying ports
EXPOSE 8080

# Command to execute when the container starts
CMD ["python3", "app/main.py"]