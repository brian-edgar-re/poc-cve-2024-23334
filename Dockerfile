# Use the official Ubuntu 22.04 LTS image as the base
FROM ubuntu:22.04

# Optional: Set a label to describe the Docker image
LABEL description="Basic Docker image with Ubuntu 22.04 LTS and some utilities"

# Run package updates and install some common utilities
RUN apt-get update && apt-get install -y python3 python3-pip

# Create a new user named 'user'
RUN useradd -m user

# Set the working directory to the new user's home directory
WORKDIR /home/user

# Change to non-root privilege
USER user

# Add application source code into dockerfile
ADD app /home/user/app
ADD requirements.txt /home/user/requirements.txt

# Command to execute when the container starts
CMD ["python3", "app/main.py"]