# Define the image name
IMAGE_NAME=poc-cve-2024-23334

# Default target executed when no arguments are given to make.
all: build

# Target to build the Docker image
build:
	docker build -t $(IMAGE_NAME) .

# Target to run the Docker container
run:
	docker run -it -p 8080:8080 $(IMAGE_NAME)

# Run the docker container in detached mode
rund:
	docker run -it -d -p 8080:8080 $(IMAGE_NAME)

# Target to clean up the Docker images (optional)
clean:
	docker rmi $(IMAGE_NAME)

# Help target to display commands supported by this Makefile
help:
	@echo "Makefile for Docker image management"
	@echo
	@echo "Usage:"
	@echo "  make         - Build the Docker image."
	@echo "  make build   - Build the Docker image explicitly."
	@echo "  make run     - Run a container from the Docker image."
	@echo "  make rund    - Run a container in detached mode from the Docker image."
	@echo "  make clean   - Remove the Docker image."
	@echo "  make help    - Show this help message."

.PHONY: all build run rund clean help
